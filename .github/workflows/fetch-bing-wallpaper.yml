name: Fetch Bing Wallpaper Daily

on: 
  workflow_dispatch
#  schedule:
#    - cron: '15 2 * * *'

jobs:
  Fetch-Bing-Wallpaper:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "::group::🏃 Runner start up"
          echo "🐧 This job is now running on a ${{ runner.os }} server hosted by GitHub!"
          echo "🔎 The branch name is ${{ github.ref }} and the repository is ${{ github.repository }}."
          echo "::endgroup::"
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
      #    cache: 'pip' # caching pip dependencies
      # - run: python3 -m pip install --upgrade pip
      - run: python3 ${{ github.workspace }}/wallpaper/bing.py
      - uses: scapeville/action-git-add-all-then-commit-then-push@v1
        with:
          # $(date +'...') Usage: https://manpages.debian.org/bullseye/coreutils/date.1.en.html
          msg: "Update by Github action: ${{ github.task.name }} Time: $(date +'%Y-%m-%d')"
        env:
          GH_TOKEN: ${{ github.token }}
      - run: echo "🍏 This job's status is ${{ job.status }}."
